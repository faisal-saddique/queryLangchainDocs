CallbackHandlerMethods
======================

Base interface for callbacks. All methods are optional. If a method is not implemented, it will be ignored. If a method is implemented, it will be called at the appropriate time. All methods are called with the run ID of the LLM/ChatModel/Chain that is running, which is generated by the CallbackManager.

Methods[](#methods "Direct link to Methods")
---------------------------------------------

### handleAgentAction()?[](#handleagentaction "Direct link to handleAgentAction()?")

Called when an agent is about to execute an action, with the action and the run ID.

> `Optional` **handleAgentAction**(`action`: [`AgentAction`](/docs/api/schema/types/AgentAction), `runId`: `string`, `parentRunId`?: `string`, `tags`?: `string`\[\]): `void` | `Promise`<`void`\>

#### Parameters[](#parameters "Direct link to Parameters")

Parameter

Type

`action`

[`AgentAction`](/docs/api/schema/types/AgentAction)

`runId`

`string`

`parentRunId?`

`string`

`tags?`

`string`\[\]

#### Returns[](#returns "Direct link to Returns")

`void` | `Promise`<`void`\>

#### Defined in[](#defined-in "Direct link to Defined in")

[langchain/src/callbacks/base.ts:176](https://github.com/hwchase17/langchainjs/blob/1c1274d/langchain/src/callbacks/base.ts#L176)

### handleAgentEnd()?[](#handleagentend "Direct link to handleAgentEnd()?")

Called when an agent finishes execution, before it exits. with the final output and the run ID.

> `Optional` **handleAgentEnd**(`action`: [`AgentFinish`](/docs/api/schema/types/AgentFinish), `runId`: `string`, `parentRunId`?: `string`, `tags`?: `string`\[\]): `void` | `Promise`<`void`\>

#### Parameters[](#parameters-1 "Direct link to Parameters")

Parameter

Type

`action`

[`AgentFinish`](/docs/api/schema/types/AgentFinish)

`runId`

`string`

`parentRunId?`

`string`

`tags?`

`string`\[\]

#### Returns[](#returns-1 "Direct link to Returns")

`void` | `Promise`<`void`\>

#### Defined in[](#defined-in-1 "Direct link to Defined in")

[langchain/src/callbacks/base.ts:187](https://github.com/hwchase17/langchainjs/blob/1c1274d/langchain/src/callbacks/base.ts#L187)

### handleChainEnd()?[](#handlechainend "Direct link to handleChainEnd()?")

Called at the end of a Chain run, with the outputs and the run ID.

> `Optional` **handleChainEnd**(`outputs`: [`ChainValues`](/docs/api/schema/types/ChainValues), `runId`: `string`, `parentRunId`?: `string`, `tags`?: `string`\[\]): `void` | `Promise`<`void`\>

#### Parameters[](#parameters-2 "Direct link to Parameters")

Parameter

Type

`outputs`

[`ChainValues`](/docs/api/schema/types/ChainValues)

`runId`

`string`

`parentRunId?`

`string`

`tags?`

`string`\[\]

#### Returns[](#returns-2 "Direct link to Returns")

`void` | `Promise`<`void`\>

#### Defined in[](#defined-in-2 "Direct link to Defined in")

[langchain/src/callbacks/base.ts:125](https://github.com/hwchase17/langchainjs/blob/1c1274d/langchain/src/callbacks/base.ts#L125)

### handleChainError()?[](#handlechainerror "Direct link to handleChainError()?")

Called if a Chain run encounters an error

> `Optional` **handleChainError**(`err`: `any`, `runId`: `string`, `parentRunId`?: `string`, `tags`?: `string`\[\]): `void` | `Promise`<`void`\>

#### Parameters[](#parameters-3 "Direct link to Parameters")

Parameter

Type

`err`

`any`

`runId`

`string`

`parentRunId?`

`string`

`tags?`

`string`\[\]

#### Returns[](#returns-3 "Direct link to Returns")

`void` | `Promise`<`void`\>

#### Defined in[](#defined-in-3 "Direct link to Defined in")

[langchain/src/callbacks/base.ts:115](https://github.com/hwchase17/langchainjs/blob/1c1274d/langchain/src/callbacks/base.ts#L115)

### handleChainStart()?[](#handlechainstart "Direct link to handleChainStart()?")

Called at the start of a Chain run, with the chain name and inputs and the run ID.

> `Optional` **handleChainStart**(`chain`: [`Serialized`](/docs/api/load_serializable/types/Serialized), `inputs`: [`ChainValues`](/docs/api/schema/types/ChainValues), `runId`: `string`, `parentRunId`?: `string`, `tags`?: `string`\[\], `metadata`?: `Record`<`string`, `unknown`\>, `runType`?: `string`): `void` | `Promise`<`void`\>

#### Parameters[](#parameters-4 "Direct link to Parameters")

Parameter

Type

`chain`

[`Serialized`](/docs/api/load_serializable/types/Serialized)

`inputs`

[`ChainValues`](/docs/api/schema/types/ChainValues)

`runId`

`string`

`parentRunId?`

`string`

`tags?`

`string`\[\]

`metadata?`

`Record`<`string`, `unknown`\>

`runType?`

`string`

#### Returns[](#returns-4 "Direct link to Returns")

`void` | `Promise`<`void`\>

#### Defined in[](#defined-in-4 "Direct link to Defined in")

[langchain/src/callbacks/base.ts:102](https://github.com/hwchase17/langchainjs/blob/1c1274d/langchain/src/callbacks/base.ts#L102)

### handleChatModelStart()?[](#handlechatmodelstart "Direct link to handleChatModelStart()?")

Called at the start of a Chat Model run, with the prompt(s) and the run ID.

> `Optional` **handleChatModelStart**(`llm`: [`Serialized`](/docs/api/load_serializable/types/Serialized), `messages`: [`BaseMessage`](/docs/api/schema/classes/BaseMessage)\[\]\[\], `runId`: `string`, `parentRunId`?: `string`, `extraParams`?: `Record`<`string`, `unknown`\>, `tags`?: `string`\[\], `metadata`?: `Record`<`string`, `unknown`\>): `void` | `Promise`<`void`\>

#### Parameters[](#parameters-5 "Direct link to Parameters")

Parameter

Type

`llm`

[`Serialized`](/docs/api/load_serializable/types/Serialized)

`messages`

[`BaseMessage`](/docs/api/schema/classes/BaseMessage)\[\]\[\]

`runId`

`string`

`parentRunId?`

`string`

`extraParams?`

`Record`<`string`, `unknown`\>

`tags?`

`string`\[\]

`metadata?`

`Record`<`string`, `unknown`\>

#### Returns[](#returns-5 "Direct link to Returns")

`void` | `Promise`<`void`\>

#### Defined in[](#defined-in-5 "Direct link to Defined in")

[langchain/src/callbacks/base.ts:88](https://github.com/hwchase17/langchainjs/blob/1c1274d/langchain/src/callbacks/base.ts#L88)

### handleLLMEnd()?[](#handlellmend "Direct link to handleLLMEnd()?")

Called at the end of an LLM/ChatModel run, with the output and the run ID.

> `Optional` **handleLLMEnd**(`output`: [`LLMResult`](/docs/api/schema/types/LLMResult), `runId`: `string`, `parentRunId`?: `string`, `tags`?: `string`\[\]): `void` | `Promise`<`void`\>

#### Parameters[](#parameters-6 "Direct link to Parameters")

Parameter

Type

`output`

[`LLMResult`](/docs/api/schema/types/LLMResult)

`runId`

`string`

`parentRunId?`

`string`

`tags?`

`string`\[\]

#### Returns[](#returns-6 "Direct link to Returns")

`void` | `Promise`<`void`\>

#### Defined in[](#defined-in-6 "Direct link to Defined in")

[langchain/src/callbacks/base.ts:77](https://github.com/hwchase17/langchainjs/blob/1c1274d/langchain/src/callbacks/base.ts#L77)

### handleLLMError()?[](#handlellmerror "Direct link to handleLLMError()?")

Called if an LLM/ChatModel run encounters an error

> `Optional` **handleLLMError**(`err`: `any`, `runId`: `string`, `parentRunId`?: `string`, `tags`?: `string`\[\]): `void` | `Promise`<`void`\>

#### Parameters[](#parameters-7 "Direct link to Parameters")

Parameter

Type

`err`

`any`

`runId`

`string`

`parentRunId?`

`string`

`tags?`

`string`\[\]

#### Returns[](#returns-7 "Direct link to Returns")

`void` | `Promise`<`void`\>

#### Defined in[](#defined-in-7 "Direct link to Defined in")

[langchain/src/callbacks/base.ts:67](https://github.com/hwchase17/langchainjs/blob/1c1274d/langchain/src/callbacks/base.ts#L67)

### handleLLMNewToken()?[](#handlellmnewtoken "Direct link to handleLLMNewToken()?")

Called when an LLM/ChatModel in `streaming` mode produces a new token

> `Optional` **handleLLMNewToken**(`token`: `string`, `idx`: [`NewTokenIndices`](/docs/api/callbacks/interfaces/NewTokenIndices), `runId`: `string`, `parentRunId`?: `string`, `tags`?: `string`\[\]): `void` | `Promise`<`void`\>

#### Parameters[](#parameters-8 "Direct link to Parameters")

Parameter

Type

Description

`token`

`string`

\-

`idx`

[`NewTokenIndices`](/docs/api/callbacks/interfaces/NewTokenIndices)

idx.prompt is the index of the prompt that produced the token  
(if there are multiple prompts)  
idx.completion is the index of the completion that produced the token  
(if multiple completions per prompt are requested)

`runId`

`string`

\-

`parentRunId?`

`string`

\-

`tags?`

`string`\[\]

\-

#### Returns[](#returns-8 "Direct link to Returns")

`void` | `Promise`<`void`\>

#### Defined in[](#defined-in-8 "Direct link to Defined in")

[langchain/src/callbacks/base.ts:50](https://github.com/hwchase17/langchainjs/blob/1c1274d/langchain/src/callbacks/base.ts#L50)

### handleLLMStart()?[](#handlellmstart "Direct link to handleLLMStart()?")

Called at the start of an LLM or Chat Model run, with the prompt(s) and the run ID.

> `Optional` **handleLLMStart**(`llm`: [`Serialized`](/docs/api/load_serializable/types/Serialized), `prompts`: `string`\[\], `runId`: `string`, `parentRunId`?: `string`, `extraParams`?: `Record`<`string`, `unknown`\>, `tags`?: `string`\[\], `metadata`?: `Record`<`string`, `unknown`\>): `void` | `Promise`<`void`\>

#### Parameters[](#parameters-9 "Direct link to Parameters")

Parameter

Type

`llm`

[`Serialized`](/docs/api/load_serializable/types/Serialized)

`prompts`

`string`\[\]

`runId`

`string`

`parentRunId?`

`string`

`extraParams?`

`Record`<`string`, `unknown`\>

`tags?`

`string`\[\]

`metadata?`

`Record`<`string`, `unknown`\>

#### Returns[](#returns-9 "Direct link to Returns")

`void` | `Promise`<`void`\>

#### Defined in[](#defined-in-9 "Direct link to Defined in")

[langchain/src/callbacks/base.ts:37](https://github.com/hwchase17/langchainjs/blob/1c1274d/langchain/src/callbacks/base.ts#L37)

### handleRetrieverEnd()?[](#handleretrieverend "Direct link to handleRetrieverEnd()?")

> `Optional` **handleRetrieverEnd**(`documents`: [`Document`](/docs/api/document/classes/Document)<`Record`<`string`, `any`\>\>\[\], `runId`: `string`, `parentRunId`?: `string`, `tags`?: `string`\[\]): `void` | `Promise`<`void`\>

#### Parameters[](#parameters-10 "Direct link to Parameters")

Parameter

Type

`documents`

[`Document`](/docs/api/document/classes/Document)<`Record`<`string`, `any`\>\>\[\]

`runId`

`string`

`parentRunId?`

`string`

`tags?`

`string`\[\]

#### Returns[](#returns-10 "Direct link to Returns")

`void` | `Promise`<`void`\>

#### Defined in[](#defined-in-10 "Direct link to Defined in")

[langchain/src/callbacks/base.ts:203](https://github.com/hwchase17/langchainjs/blob/1c1274d/langchain/src/callbacks/base.ts#L203)

### handleRetrieverError()?[](#handleretrievererror "Direct link to handleRetrieverError()?")

> `Optional` **handleRetrieverError**(`err`: `any`, `runId`: `string`, `parentRunId`?: `string`, `tags`?: `string`\[\]): `void` | `Promise`<`void`\>

#### Parameters[](#parameters-11 "Direct link to Parameters")

Parameter

Type

`err`

`any`

`runId`

`string`

`parentRunId?`

`string`

`tags?`

`string`\[\]

#### Returns[](#returns-11 "Direct link to Returns")

`void` | `Promise`<`void`\>

#### Defined in[](#defined-in-11 "Direct link to Defined in")

[langchain/src/callbacks/base.ts:210](https://github.com/hwchase17/langchainjs/blob/1c1274d/langchain/src/callbacks/base.ts#L210)

### handleRetrieverStart()?[](#handleretrieverstart "Direct link to handleRetrieverStart()?")

> `Optional` **handleRetrieverStart**(`retriever`: [`Serialized`](/docs/api/load_serializable/types/Serialized), `query`: `string`, `runId`: `string`, `parentRunId`?: `string`, `tags`?: `string`\[\], `metadata`?: `Record`<`string`, `unknown`\>): `void` | `Promise`<`void`\>

#### Parameters[](#parameters-12 "Direct link to Parameters")

Parameter

Type

`retriever`

[`Serialized`](/docs/api/load_serializable/types/Serialized)

`query`

`string`

`runId`

`string`

`parentRunId?`

`string`

`tags?`

`string`\[\]

`metadata?`

`Record`<`string`, `unknown`\>

#### Returns[](#returns-12 "Direct link to Returns")

`void` | `Promise`<`void`\>

#### Defined in[](#defined-in-12 "Direct link to Defined in")

[langchain/src/callbacks/base.ts:194](https://github.com/hwchase17/langchainjs/blob/1c1274d/langchain/src/callbacks/base.ts#L194)

### handleText()?[](#handletext "Direct link to handleText()?")

> `Optional` **handleText**(`text`: `string`, `runId`: `string`, `parentRunId`?: `string`, `tags`?: `string`\[\]): `void` | `Promise`<`void`\>

#### Parameters[](#parameters-13 "Direct link to Parameters")

Parameter

Type

`text`

`string`

`runId`

`string`

`parentRunId?`

`string`

`tags?`

`string`\[\]

#### Returns[](#returns-13 "Direct link to Returns")

`void` | `Promise`<`void`\>

#### Defined in[](#defined-in-13 "Direct link to Defined in")

[langchain/src/callbacks/base.ts:165](https://github.com/hwchase17/langchainjs/blob/1c1274d/langchain/src/callbacks/base.ts#L165)

### handleToolEnd()?[](#handletoolend "Direct link to handleToolEnd()?")

Called at the end of a Tool run, with the tool output and the run ID.

> `Optional` **handleToolEnd**(`output`: `string`, `runId`: `string`, `parentRunId`?: `string`, `tags`?: `string`\[\]): `void` | `Promise`<`void`\>

#### Parameters[](#parameters-14 "Direct link to Parameters")

Parameter

Type

`output`

`string`

`runId`

`string`

`parentRunId?`

`string`

`tags?`

`string`\[\]

#### Returns[](#returns-14 "Direct link to Returns")

`void` | `Promise`<`void`\>

#### Defined in[](#defined-in-14 "Direct link to Defined in")

[langchain/src/callbacks/base.ts:158](https://github.com/hwchase17/langchainjs/blob/1c1274d/langchain/src/callbacks/base.ts#L158)

### handleToolError()?[](#handletoolerror "Direct link to handleToolError()?")

Called if a Tool run encounters an error

> `Optional` **handleToolError**(`err`: `any`, `runId`: `string`, `parentRunId`?: `string`, `tags`?: `string`\[\]): `void` | `Promise`<`void`\>

#### Parameters[](#parameters-15 "Direct link to Parameters")

Parameter

Type

`err`

`any`

`runId`

`string`

`parentRunId?`

`string`

`tags?`

`string`\[\]

#### Returns[](#returns-15 "Direct link to Returns")

`void` | `Promise`<`void`\>

#### Defined in[](#defined-in-15 "Direct link to Defined in")

[langchain/src/callbacks/base.ts:148](https://github.com/hwchase17/langchainjs/blob/1c1274d/langchain/src/callbacks/base.ts#L148)

### handleToolStart()?[](#handletoolstart "Direct link to handleToolStart()?")

Called at the start of a Tool run, with the tool name and input and the run ID.

> `Optional` **handleToolStart**(`tool`: [`Serialized`](/docs/api/load_serializable/types/Serialized), `input`: `string`, `runId`: `string`, `parentRunId`?: `string`, `tags`?: `string`\[\], `metadata`?: `Record`<`string`, `unknown`\>): `void` | `Promise`<`void`\>

#### Parameters[](#parameters-16 "Direct link to Parameters")

Parameter

Type

`tool`

[`Serialized`](/docs/api/load_serializable/types/Serialized)

`input`

`string`

`runId`

`string`

`parentRunId?`

`string`

`tags?`

`string`\[\]

`metadata?`

`Record`<`string`, `unknown`\>

#### Returns[](#returns-16 "Direct link to Returns")

`void` | `Promise`<`void`\>

#### Defined in[](#defined-in-16 "Direct link to Defined in")

[langchain/src/callbacks/base.ts:136](https://github.com/hwchase17/langchainjs/blob/1c1274d/langchain/src/callbacks/base.ts#L136)